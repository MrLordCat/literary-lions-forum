<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <a href="/"><button> Home</button></a>
    <title>Posts</title>
    <style>
        .post {
            border-bottom: 1px solid #ccc;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Posts</h1>
    {{range .Posts}}
    <div class="post">
        <h2>{{.Title}}</h2>
        <p>{{.Content}}</p>
        <div>
            Likes: {{.Likes}}, Dislikes: {{.Dislikes}}
            <form method="POST" action="/like">
                <input type="hidden" name="post_id" value="{{.ID}}">
                <input type="hidden" name="like_type" value="1">
                <button type="submit" class="like-button">Like</button>
            </form>
            <form method="POST" action="/like">
                <input type="hidden" name="post_id" value="{{.ID}}">
                <input type="hidden" name="like_type" value="-1">
                <button type="submit" class="dislike-button">Dislike</button>
            </form>
        </div>
        <small>Posted by {{.AuthorName}} at {{.CreatedAt}}</small>
        <h3>Comments:</h3>
        {{if .Comments}}
        <ul>
            {{range .Comments}}
            <li>{{.AuthorName}} said: {{.Content}} <br><small>{{.CreatedAt}}</small></li>
            {{end}}
        </ul>
        {{else}}
        <p>No comments yet.</p>
        {{end}}

        <!-- Форма для добавления комментария -->
        <form method="POST" action="/add-comment">
            <input type="hidden" name="post_id" value="{{.ID}}">
            <textarea name="content" required placeholder="Add a comment..."></textarea><br>
            <button type="submit">Comment</button>
        </form>
    </div>
    {{else}}
    <p>No posts found.</p>
    {{end}}
</body>
</html>
